{% extends "console/base.html" %}
{% load mytags %}
{% block mainbody %}
    <ul style="text-align: center">
        <li style="float: left;list-style: none"><h3>会员信息列表</h3></li>
        <li style="float: right;list-style: none;padding-top: 15px;">
            <form class="navbar-search pull-left" action="{% url 'console_user_query' 1 3 ''%}" method="post">
                {% csrf_token %}
                <input type="text" id="keyword" name="keyword" value="{{ keyword }}" class="search-query span2" placeholder="请输入账号/姓名" />
                <button type="submit">查询</button>
            </form>
        </li>
    </ul>
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>id号</th>
                <th>账号</th>
                <th>姓名</th>
                <th>性别</th>
                <th>邮箱</th>
                <th>注册时间</th>
                <th>状态</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
                <tr>
                    <td>{{ user.id }}</td>
                    <td>{{ user.username }}</td>
                    <td>{{ user.name }}</td>
                    <td>{% if user.sex == 0 %}女 {% else %} 男 {% endif %}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.addtime }}</td>
                    <td>{% if user.state == 0 %}管理员{% elif user.state == 1 %}会员{% elif user.state == 2 %}禁用{% endif %}</td>
                    <td>
                        <a href="{% url 'console_user_edit' user.id %}">编辑</a>
                        <a href="{% url 'console_user_del' user.id %}">删除</a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="pagination">
        <ul>
            {% if pagenum == '1' %}
                <li class="disabled"><a href="#">&laquo;</a></li>
            {% else %}
                <li>
                    <a href="{% url 'console_user_query' prepage 3 keyword %}">&laquo;</a>
                </li>
            {% endif %}

            {% for pv in pagerange  %}
                {% if pagenum|toint == pv %}
                    <li class="active">
                        <a href="#">{{ pv }}</a>
                    </li>
                {% else %}
                    <li>
                        <a href="{% url 'console_user_query' pv 3 keyword%}">{{ pv }}</a>
                     </li>
                {% endif %}
            {% endfor %}
            {% if maxpagenum == pagenum %}
                <li class="disabled"><a href="#">&raquo;</a></li>
            {% else %}
                 <li >
                    <a href="{% url 'console_user_query' nextpage 3 keyword%}">&raquo;</a>
                </li>
            {% endif %}

        </ul>
    </div>
{% endblock %}